@model IEnumerable<CV_siten.Data.Models.Project>

<div class="main-box welcome-area join-projects-card">
    <h2 class="join-projects-title"><i class="fas fa-project-diagram"></i> Gå med i projekt</h2>
    <p class="text-muted">Hitta projekt där din kompetens behövs.</p>
    <hr />

    <div class="projects-grid join-projects-grid">
        @foreach (var project in Model)
        {
            <div class="project-card join-projects-project-card">

                <div class="project-card-image join-projects-image-wrap">
                    @if (!string.IsNullOrEmpty(project.ImageUrl))
                    {
                        <img src="@Url.Content("~/images/projects/" + project.ImageUrl)"
                             alt="@project.ProjectName"
                             class="join-projects-img" />
                    }
                    else
                    {
                        <i class="fas fa-project-diagram join-projects-fallback-icon"></i>
                    }
                </div>

                <div class="join-projects-body">
                    <div class="join-projects-head">
                        <span class="join-projects-name">@project.ProjectName</span>
                        <span class="join-projects-owner">
                            <i class="fas fa-user-edit"></i> Ägare: @project.Owner?.FirstName @project.Owner?.LastName
                        </span>
                    </div>

                    @* DETALJER *@
                    <div class="join-projects-details">
                        <div><i class="fas fa-layer-group"></i> <strong>Typ:</strong> @(project.Type ?? "Webb")</div>
                        <div>
                            <i class="fas fa-circle join-projects-status-dot @(project.Status == "Aktivt" ? "is-active" : "is-inactive")"></i>
                            <strong>Status:</strong> @(project.Status ?? "Aktivt")
                        </div>
                        <div><i class="fas fa-calendar-alt"></i> <strong>Start:</strong> @project.StartDate.ToString("yyyy-MM-dd")</div>
                        <div><i class="fas fa-calendar-check"></i> <strong>Slut:</strong> @(project.EndDate.HasValue? project.EndDate.Value.ToString("yyyy-MM-dd") : "Pågående")</div>
                    </div>

                    @* FOOTER *@
                    <div class="join-projects-footer">
                        <div class="join-projects-members-badge">
                            <i class="fas fa-users"></i> @(project.PersonProjects?.Count ?? 0)
                        </div>

                        <button type="button"
                                class="btn-action btn-primary btn-small join-projects-join-btn"
                                data-join-project-id="@project.Id"
                                data-join-project-name="@project.ProjectName">
                            Gå med
                        </button>
                    </div>
                </div>

            </div>
        }
    </div>
</div>

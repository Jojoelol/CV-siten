@model CV_siten.Models.Person

<div class="profile-page-wrapper">
    <aside class="profile-sidebar">
        <div class="sidebar-card">
            <div class="pic-placeholder">
                @if (!string.IsNullOrEmpty(Model.BildUrl))
                {
                    <img src="@Model.BildUrl" alt="Profilbild" style="width:100%; height:100%; object-fit:cover;" />
                }
                else
                {
                    <span>Profilbild</span>
                }
            </div>

            <h2 class="profile-name">@Model.Fornamn @Model.Efternamn</h2>
            <p class="profile-title">@Model.Yrkestitel</p>

            <div class="profile-bio">
                <p>@Model.Beskrivning</p>
            </div>

            <div class="sidebar-actions">
                <a href="#" class="btn-action btn-primary">Ladda ned @Model.Fornamn's CV</a>
            </div>
        </div>
    </aside>

    <section class="profile-main-content">

        <form asp-action="Profile" method="get" class="content-toolbar">
            <input type="hidden" name="id" value="@Model.Id" />

            <div class="search-box">
                <input type="text" name="searchString" value="@ViewBag.CurrentSearch"
                       placeholder="Sök efter projekt..." class="form-control-custom">
            </div>

            <div class="sort-box">
                <select name="sortBy" class="form-select-custom" onchange="this.form.submit()">
                    <option value="">Sortera efter...</option>
                    <option value="status">Status</option>
                    <option value="tid">Tid</option>
                </select>
            </div>

            <button type="submit" class="btn-action btn-primary">Sök</button>
            <button type="button" class="btn-action btn-outline">Lägg till projekt</button>
        </form>

        <div class="projects-container">
            <h3 class="section-title">Mina Projekt</h3>

            @if (Model.PersonProjekt != null && Model.PersonProjekt.Any())
            {
                <div class="projects-list">
                    @foreach (var pp in Model.PersonProjekt)
                    {
                        <div class="project-pill">
                            @pp.Projekt.Projektnamn
                        </div>
                    }
                </div>
            }
            else
            {
                <p>Inga projekt hittades.</p>
            }
        </div>
    </section>
</div>